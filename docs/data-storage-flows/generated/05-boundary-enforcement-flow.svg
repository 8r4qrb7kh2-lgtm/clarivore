<svg id="my-svg" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart" style="max-width: 2634.56px; background-color: white;" viewBox="0 0 2634.5625 1133" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#my-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#my-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg p{margin:0;}#my-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#my-svg .cluster-label text{fill:#333;}#my-svg .cluster-label span{color:#333;}#my-svg .cluster-label span p{background-color:transparent;}#my-svg .label text,#my-svg span{fill:#333;color:#333;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .rough-node .label text,#my-svg .node .label text,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .rough-node .label,#my-svg .node .label,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#my-svg .arrowheadPath{fill:#333333;}#my-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#333333;fill:none;}#my-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#my-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#my-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#my-svg .cluster text{fill:#333;}#my-svg .cluster span{color:#333;}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg rect.text{fill:none;stroke-width:0;}#my-svg .icon-shape,#my-svg .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .icon-shape p,#my-svg .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#my-svg .icon-shape rect,#my-svg .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#my-svg .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker id="my-svg_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><g class="root"><g class="clusters"><g class="cluster" id="BOUNDARY" data-look="classic"><rect style="" x="2214.71875" y="8" width="411.84375" height="956"/><g class="cluster-label" transform="translate(2361.125, 8)"><foreignObject width="119.03125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Protected Tables</p></span></div></foreignObject></g></g><g class="cluster" id="ENFORCER" data-look="classic"><rect style="" x="440.0625" y="30" width="1680.84375" height="1052"/><g class="cluster-label" transform="translate(1222.75, 30)"><foreignObject width="115.46875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>DB Enforcement</p></span></div></foreignObject></g></g><g class="cluster" id="WRITERS" data-look="classic"><rect style="" x="8" y="136" width="382.0625" height="708"/><g class="cluster-label" transform="translate(138.6328125, 136)"><foreignObject width="120.796875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Potential Writers</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M365.063,366L369.229,366C373.396,366,381.729,366,390.063,366C398.396,366,406.729,366,415.063,366C423.396,366,431.729,366,479.662,383.914C527.594,401.828,615.126,437.656,658.891,455.571L702.657,473.485" id="L_W1_E1_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_W1_E1_0" data-points="W3sieCI6MzY1LjA2MjUsInkiOjM2Nn0seyJ4IjozOTAuMDYyNSwieSI6MzY2fSx7IngiOjQxNS4wNjI1LCJ5IjozNjZ9LHsieCI6NDQwLjA2MjUsInkiOjM2Nn0seyJ4Ijo3MDYuMzU4OTY2MjA2Mzk1MywieSI6NDc1fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1255.484,538L1259.651,538C1263.818,538,1272.151,538,1279.818,538C1287.484,538,1294.484,538,1297.984,538L1301.484,538" id="L_E1_E2_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_E1_E2_0" data-points="W3sieCI6MTI1NS40ODQzNzUsInkiOjUzOH0seyJ4IjoxMjgwLjQ4NDM3NSwieSI6NTM4fSx7IngiOjEzMDUuNDg0Mzc1LCJ5Ijo1Mzh9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1746.488,487L1808.891,417.5C1871.294,348,1996.1,209,2066.321,139.5C2136.542,70,2152.177,70,2167.813,70C2183.448,70,2199.083,70,2228.796,70C2258.508,70,2302.297,70,2324.191,70L2346.086,70" id="L_E2_B1_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_E2_B1_0" data-points="W3sieCI6MTc0Ni40ODc1MzAwNDgwNzcsInkiOjQ4N30seyJ4IjoyMTIwLjkwNjI1LCJ5Ijo3MH0seyJ4IjoyMTY3LjgxMjUsInkiOjcwfSx7IngiOjIyMTQuNzE4NzUsInkiOjcwfSx7IngiOjIzNTAuMDg1OTM3NSwieSI6NzB9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1759.571,487L1819.794,434.833C1880.016,382.667,2000.461,278.333,2068.501,226.167C2136.542,174,2152.177,174,2167.813,174C2183.448,174,2199.083,174,2228.323,174C2257.563,174,2300.406,174,2321.828,174L2343.25,174" id="L_E2_B2_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_E2_B2_0" data-points="W3sieCI6MTc1OS41NzEwMjA3NzYwOTksInkiOjQ4N30seyJ4IjoyMTIwLjkwNjI1LCJ5IjoxNzR9LHsieCI6MjE2Ny44MTI1LCJ5IjoxNzR9LHsieCI6MjIxNC43MTg3NSwieSI6MTc0fSx7IngiOjIzNDcuMjUsInkiOjE3NH1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1783.121,487L1839.419,452.167C1895.716,417.333,2008.311,347.667,2072.426,312.833C2136.542,278,2152.177,278,2167.813,278C2183.448,278,2199.083,278,2222.868,278C2246.654,278,2278.589,278,2294.556,278L2310.523,278" id="L_E2_B3_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_E2_B3_0" data-points="W3sieCI6MTc4My4xMjEzMDQwODY1Mzg0LCJ5Ijo0ODd9LHsieCI6MjEyMC45MDYyNSwieSI6Mjc4fSx7IngiOjIxNjcuODEyNSwieSI6Mjc4fSx7IngiOjIyMTQuNzE4NzUsInkiOjI3OH0seyJ4IjoyMzE0LjUyMzQzNzUsInkiOjI3OH1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1838.072,487L1885.211,469.5C1932.35,452,2026.628,417,2081.585,399.5C2136.542,382,2152.177,382,2167.813,382C2183.448,382,2199.083,382,2220.237,382C2241.391,382,2268.063,382,2281.398,382L2294.734,382" id="L_E2_B4_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_E2_B4_0" data-points="W3sieCI6MTgzOC4wNzE5NjUxNDQyMzA3LCJ5Ijo0ODd9LHsieCI6MjEyMC45MDYyNSwieSI6MzgyfSx7IngiOjIxNjcuODEyNSwieSI6MzgyfSx7IngiOjIyMTQuNzE4NzUsInkiOjM4Mn0seyJ4IjoyMjk4LjczNDM3NSwieSI6MzgyfV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M2095.906,489.094L2100.073,488.578C2104.24,488.062,2112.573,487.031,2124.557,486.516C2136.542,486,2152.177,486,2167.813,486C2183.448,486,2199.083,486,2222.715,486C2246.346,486,2277.974,486,2293.788,486L2309.602,486" id="L_E2_B5_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_E2_B5_0" data-points="W3sieCI6MjA5NS45MDYyNSwieSI6NDg5LjA5MzY4NDM0NzUxODl9LHsieCI6MjEyMC45MDYyNSwieSI6NDg2fSx7IngiOjIxNjcuODEyNSwieSI6NDg2fSx7IngiOjIyMTQuNzE4NzUsInkiOjQ4Nn0seyJ4IjoyMzEzLjYwMTU2MjUsInkiOjQ4Nn1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M2095.906,586.906L2100.073,587.422C2104.24,587.938,2112.573,588.969,2124.557,589.484C2136.542,590,2152.177,590,2167.813,590C2183.448,590,2199.083,590,2221.267,590C2243.451,590,2272.182,590,2286.548,590L2300.914,590" id="L_E2_B6_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_E2_B6_0" data-points="W3sieCI6MjA5NS45MDYyNSwieSI6NTg2LjkwNjMxNTY1MjQ4MTF9LHsieCI6MjEyMC45MDYyNSwieSI6NTkwfSx7IngiOjIxNjcuODEyNSwieSI6NTkwfSx7IngiOjIyMTQuNzE4NzUsInkiOjU5MH0seyJ4IjoyMzA0LjkxNDA2MjUsInkiOjU5MH1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1838.072,589L1885.211,606.5C1932.35,624,2026.628,659,2081.585,676.5C2136.542,694,2152.177,694,2167.813,694C2183.448,694,2199.083,694,2220.988,694C2242.893,694,2271.068,694,2285.155,694L2299.242,694" id="L_E2_B7_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_E2_B7_0" data-points="W3sieCI6MTgzOC4wNzE5NjUxNDQyMzA3LCJ5Ijo1ODl9LHsieCI6MjEyMC45MDYyNSwieSI6Njk0fSx7IngiOjIxNjcuODEyNSwieSI6Njk0fSx7IngiOjIyMTQuNzE4NzUsInkiOjY5NH0seyJ4IjoyMzAzLjI0MjE4NzUsInkiOjY5NH1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1783.121,589L1839.419,623.833C1895.716,658.667,2008.311,728.333,2072.426,763.167C2136.542,798,2152.177,798,2167.813,798C2183.448,798,2199.083,798,2215.051,798C2231.018,798,2247.318,798,2255.467,798L2263.617,798" id="L_E2_B8_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_E2_B8_0" data-points="W3sieCI6MTc4My4xMjEzMDQwODY1Mzg0LCJ5Ijo1ODl9LHsieCI6MjEyMC45MDYyNSwieSI6Nzk4fSx7IngiOjIxNjcuODEyNSwieSI6Nzk4fSx7IngiOjIyMTQuNzE4NzUsInkiOjc5OH0seyJ4IjoyMjY3LjYxNzE4NzUsInkiOjc5OH1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1759.571,589L1819.794,641.167C1880.016,693.333,2000.461,797.667,2068.501,849.833C2136.542,902,2152.177,902,2167.813,902C2183.448,902,2199.083,902,2210.401,902C2221.719,902,2228.719,902,2232.219,902L2235.719,902" id="L_E2_B9_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_E2_B9_0" data-points="W3sieCI6MTc1OS41NzEwMjA3NzYwOTksInkiOjU4OX0seyJ4IjoyMTIwLjkwNjI1LCJ5Ijo5MDJ9LHsieCI6MjE2Ny44MTI1LCJ5Ijo5MDJ9LHsieCI6MjIxNC43MTg3NSwieSI6OTAyfSx7IngiOjIyMzkuNzE4NzUsInkiOjkwMn1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M329.031,710L339.203,710C349.375,710,369.719,710,384.057,710C398.396,710,406.729,710,415.063,710C423.396,710,431.729,710,479.662,692.086C527.594,674.172,615.126,638.344,658.891,620.429L702.657,602.515" id="L_W2_E1_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_W2_E1_0" data-points="W3sieCI6MzI5LjAzMTI1LCJ5Ijo3MTB9LHsieCI6MzkwLjA2MjUsInkiOjcxMH0seyJ4Ijo0MTUuMDYyNSwieSI6NzEwfSx7IngiOjQ0MC4wNjI1LCJ5Ijo3MTB9LHsieCI6NzA2LjM1ODk2NjIwNjM5NTMsInkiOjYwMX1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1741.594,589L1804.812,667.833C1868.031,746.667,1994.469,904.333,2065.505,983.167C2136.542,1062,2152.177,1062,2167.813,1062C2183.448,1062,2199.083,1062,2218.888,1062C2238.693,1062,2262.667,1062,2274.654,1062L2286.641,1062" id="L_E2_ERR_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_E2_ERR_0" data-points="W3sieCI6MTc0MS41OTM3MDUyNzE5NDY2LCJ5Ijo1ODl9LHsieCI6MjEyMC45MDYyNSwieSI6MTA2Mn0seyJ4IjoyMTY3LjgxMjUsInkiOjEwNjJ9LHsieCI6MjIxNC43MTg3NSwieSI6MTA2Mn0seyJ4IjoyMjkwLjY0MDYyNSwieSI6MTA2Mn1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" data-id="L_W1_E1_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_E1_E2_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(2167.8125, 70)"><g class="label" data-id="L_E2_B1_0" transform="translate(-19.171875, -12)"><foreignObject width="38.34375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>allow</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(2167.8125, 174)"><g class="label" data-id="L_E2_B2_0" transform="translate(-19.171875, -12)"><foreignObject width="38.34375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>allow</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(2167.8125, 278)"><g class="label" data-id="L_E2_B3_0" transform="translate(-19.171875, -12)"><foreignObject width="38.34375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>allow</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(2167.8125, 382)"><g class="label" data-id="L_E2_B4_0" transform="translate(-19.171875, -12)"><foreignObject width="38.34375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>allow</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(2167.8125, 486)"><g class="label" data-id="L_E2_B5_0" transform="translate(-19.171875, -12)"><foreignObject width="38.34375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>allow</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(2167.8125, 590)"><g class="label" data-id="L_E2_B6_0" transform="translate(-19.171875, -12)"><foreignObject width="38.34375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>allow</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(2167.8125, 694)"><g class="label" data-id="L_E2_B7_0" transform="translate(-19.171875, -12)"><foreignObject width="38.34375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>allow</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(2167.8125, 798)"><g class="label" data-id="L_E2_B8_0" transform="translate(-19.171875, -12)"><foreignObject width="38.34375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>allow</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(2167.8125, 902)"><g class="label" data-id="L_E2_B9_0" transform="translate(-19.171875, -12)"><foreignObject width="38.34375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>allow</p></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_W2_E1_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(2167.8125, 1062)"><g class="label" data-id="L_E2_ERR_0" transform="translate(-21.90625, -12)"><foreignObject width="43.8125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>reject</p></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="flowchart-W1-0" transform="translate(199.03125, 366)"><rect class="basic label-container" style="" x="-166.03125" y="-195" width="332.0625" height="390"/><g class="label" style="" transform="translate(-136.03125, -180)"><rect/><foreignObject width="272.0625" height="360"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Gateway tx path<br />(setRestaurantWriteContext 9393)<br />Users: manager/owner with restaurant access, app admin, system key<br />Page/surface: /restaurant, /admin-dashboard, cron/system<br />Files: app/api/restaurant-write/_shared/writeGatewayUtils.js; app/api/restaurant-write/stage/route.js; app/api/restaurant-write/commit/route.js; app/api/restaurant-write/system/route.js</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-W2-1" transform="translate(199.03125, 710)"><rect class="basic label-container" style="" x="-130" y="-99" width="260" height="198"/><g class="label" style="" transform="translate(-100, -84)"><rect/><foreignObject width="200" height="168"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Direct SQL/Prisma/Supabase write<br />(no gateway context)<br />Users: any caller bypassing gateway<br />Page/surface: any non-gateway entry</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-E1-2" transform="translate(860.2734375, 538)"><rect class="basic label-container" style="" x="-395.2109375" y="-63" width="790.421875" height="126"/><g class="label" style="" transform="translate(-365.2109375, -48)"><rect/><foreignObject width="730.421875" height="96"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Trigger function:<br />enforce_restaurant_gateway_context()<br />File: supabase/migrations/20260224201000_enforce_gateway_context_on_restaurant_boundary_tables.sql</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-E2-3" transform="translate(1700.6953125, 538)"><rect class="basic label-container" style="" x="-395.2109375" y="-51" width="790.421875" height="102"/><g class="label" style="" transform="translate(-365.2109375, -36)"><rect/><foreignObject width="730.421875" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Check current_setting('app.restaurant_write_context') == 'gateway'<br />File: supabase/migrations/20260224201000_enforce_gateway_context_on_restaurant_boundary_tables.sql</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-B1-4" transform="translate(2420.640625, 70)"><rect class="basic label-container" style="" x="-70.5546875" y="-27" width="141.109375" height="54"/><g class="label" style="" transform="translate(-40.5546875, -12)"><rect/><foreignObject width="81.109375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>restaurants</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-B2-5" transform="translate(2420.640625, 174)"><rect class="basic label-container" style="" x="-73.390625" y="-27" width="146.78125" height="54"/><g class="label" style="" transform="translate(-43.390625, -12)"><rect/><foreignObject width="86.78125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>change_logs</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-B3-6" transform="translate(2420.640625, 278)"><rect class="basic label-container" style="" x="-106.1171875" y="-27" width="212.234375" height="54"/><g class="label" style="" transform="translate(-76.1171875, -12)"><rect/><foreignObject width="152.234375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>dish_ingredient_rows</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-B4-7" transform="translate(2420.640625, 382)"><rect class="basic label-container" style="" x="-121.90625" y="-27" width="243.8125" height="54"/><g class="label" style="" transform="translate(-91.90625, -12)"><rect/><foreignObject width="183.8125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>dish_ingredient_allergens</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-B5-8" transform="translate(2420.640625, 486)"><rect class="basic label-container" style="" x="-107.0390625" y="-27" width="214.078125" height="54"/><g class="label" style="" transform="translate(-77.0390625, -12)"><rect/><foreignObject width="154.078125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>dish_ingredient_diets</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-B6-9" transform="translate(2420.640625, 590)"><rect class="basic label-container" style="" x="-115.7265625" y="-27" width="231.453125" height="54"/><g class="label" style="" transform="translate(-85.7265625, -12)"><rect/><foreignObject width="171.453125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>restaurant_menu_pages</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-B7-10" transform="translate(2420.640625, 694)"><rect class="basic label-container" style="" x="-117.3984375" y="-27" width="234.796875" height="54"/><g class="label" style="" transform="translate(-87.3984375, -12)"><rect/><foreignObject width="174.796875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>restaurant_menu_dishes</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-B8-11" transform="translate(2420.640625, 798)"><rect class="basic label-container" style="" x="-153.0234375" y="-27" width="306.046875" height="54"/><g class="label" style="" transform="translate(-123.0234375, -12)"><rect/><foreignObject width="246.046875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>restaurant_menu_ingredient_rows</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-B9-12" transform="translate(2420.640625, 902)"><rect class="basic label-container" style="" x="-180.921875" y="-27" width="361.84375" height="54"/><g class="label" style="" transform="translate(-150.921875, -12)"><rect/><foreignObject width="301.84375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>restaurant_menu_ingredient_brand_items</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-ERR-36" transform="translate(2420.640625, 1062)"><rect class="basic label-container" style="" x="-130" y="-63" width="260" height="126"/><g class="label" style="" transform="translate(-100, -48)"><rect/><foreignObject width="200" height="96"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>ERROR 42501:<br />Direct write blocked; use unified restaurant write gateway</p></span></div></foreignObject></g></g></g></g></g></svg>